(this["webpackJsonptask-tikets"]=this["webpackJsonptask-tikets"]||[]).push([[0],{52:function(e,t,a){e.exports=a.p+"static/media/aviasales.f887d096.svg"},62:function(e,t,a){e.exports=a(96)},94:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),c=a.n(o),i=a(14),s=a(16),l=a(50),u=a(51),d=a(11),p={isLoadingSearchId:!1,searchId:null,isLoadingTickets:!1,ticketsLoaded:!1,responseTickets:{}};var m=Object(s.combineReducers)({items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_SEARCH_ID":return Object(d.a)(Object(d.a)({},e),{},{isLoadingSearchId:!0});case"REQUEST_SEARCH_ID_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isLoadingSearchId:!1,searchId:t.payload});case"REQUEST_TICKETS":return Object(d.a)(Object(d.a)({},e),{},{isLoadingTickets:!0});case"REQUEST_TICKETS_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isLoadingTickets:!1,responseTickets:t.payload,ticketsLoaded:!0});default:return e}}}),f=a(32),b=a(27),g=a(12),h=a(97),v=a(124),E=a(26),k=a.n(E),C=a(36),S=a(37),w=a.n(S),O=function(e){return{type:"REQUEST_TICKETS_SUCCESS",payload:e}},j=function(){var e=Object(C.a)(k.a.mark((function e(t){var a,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_SEARCH_ID"}),e.next=3,w.a.get("https://front-test.beta.aviasales.ru/search");case 3:return a=e.sent,n=a.data.searchId,t({type:"REQUEST_SEARCH_ID_SUCCESS",payload:n}),t({type:"REQUEST_TICKETS"}),r=function(){var e=Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(n)).then((function(e){return e.data.stop?t(O(e.data)):r()})).catch((function(){setTimeout((function(){return r()}),200)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=10,r();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=a(52),y=a.n(x),T=a(119),I=Object(T.a)((function(e){return{button:{margin:e.spacing(0,"auto",6.5),display:"flex",borderStyle:"none","&:hover":{borderStyle:"none"}},logo:{width:83,height:74}}}));function N(){var e=I(),t=Object(i.b)(),a=Object(i.c)((function(e){return e.items})).isLoadingTickets;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{variant:"outlined",classes:{root:e.button},centerRipple:!0,color:"primary",onClick:function(){t(j)}},r.a.createElement("img",{className:e.logo,alt:"search",src:y.a})),a&&r.a.createElement(v.a,{classes:{root:e.spinner}}))}var R=a(121),B=a(123),_=a(125),L=a(3),U=Object(T.a)((function(e){return{checkBoxWrapper:{width:232,height:250,backgroundColor:"white",filter:"drop-shadow(0px 2px 4px rgba(0,0,0,0.1))",marginRight:e.spacing(2.5),borderRadius:5,padding:e.spacing(2.5)},numberOfTransfers:{fontSize:14,color:"#4a4a4a",fontWeight:600,letterSpacing:1,marginBottom:e.spacing(1)},root:{"&:hover":{backgroundColor:"#f1fcff",width:263}},icon:{borderRadius:2,width:20,height:20,boxShadow:"inset 0 0 0 1px rgba(16,22,26,.2), inset 0 -1px 0 rgba(16,22,26,.1)",backgroundColor:"#f5f8fa",backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.8),hsla(0,0%,100%,0))","$root.Mui-focusVisible &":{outline:"2px auto rgba(19,124,189,.6)",outlineOffset:2},"input:hover ~ &":{backgroundColor:"#ebf1f5"},"input:disabled ~ &":{boxShadow:"none",background:"rgba(206,217,224,.5)"}},checkedIcon:{backgroundColor:"#2196f3",backgroundImage:"linear-gradient(180deg,hsla(0,0%,100%,.1),hsla(0,0%,100%,0))","&:before":{display:"block",width:20,height:20,backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='%23fff'/%3E%3C/svg%3E\")",content:'""'},"input:hover ~ &":{backgroundColor:"#2196f3"}}}}));function H(e){var t=e.handleChange,a=e.stateCheckBox,n=e.checkboxGroup,o=void 0===n?[]:n,c=U();return r.a.createElement("div",{className:c.checkBoxWrapper},r.a.createElement("div",{className:c.numberOfTransfers},"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"),r.a.createElement(R.a,null,o.length&&o.map((function(e){var n=e.id,o=e.label,i=e.value;return r.a.createElement(_.a,{classes:{root:c.root},key:n,control:r.a.createElement(B.a,{checkedIcon:r.a.createElement("span",{className:Object(L.a)(c.icon,c.checkedIcon)}),icon:r.a.createElement("span",{className:c.icon}),checked:!!(null===a||void 0===a?void 0:a[n]),onChange:function(e,a){return t(n,i,a)},name:o}),label:o})}))))}var A=a(122),W=Object(T.a)((function(e){return{button:{width:271,borderRadius:8,height:50,backgroundColor:"white",border:"1px solid #dfe5ec","&:hover":{backgroundColor:"#2196f3"}},buttonActive:{width:271,borderRadius:8,height:50,backgroundColor:"#2196f3",border:"1px solid #dfe5ec","&:hover":{backgroundColor:"#2196f3"}}}}));function z(e){var t=e.handleClickButtonCheap,a=e.handleClickButtonFast,n=e.isButtonActive,o=W();return r.a.createElement(A.a,{disableElevation:!0,variant:"contained"},r.a.createElement(h.a,{onClick:t,className:"cheap"===n?o.buttonActive:o.button},"Cheap"),r.a.createElement(h.a,{onClick:a,className:"fast"===n?o.buttonActive:o.button},"Fast"))}var F=a(38),Q=a.n(F),M=Object(T.a)((function(e){return{ticketContainer:{width:502,height:184,backgroundColor:"white",filter:"drop-shadow(0px 2px 4px rgba(0,0,0,0.1))",borderRadius:5,marginTop:e.spacing(2.5),padding:e.spacing(2.5)},wrapperHeaderContainer:{display:"flex",justifyContent:"space-between",marginBottom:e.spacing(3.2)},wrapperInfoContainer:{display:"flex",justifyContent:"space-between",marginBottom:e.spacing(2)},price:{fontSize:24,display:"flex",alignItems:"center",color:"#2196f3",fontWeight:600},wrapperTimeContainer:{color:"red"},wrapperFlightInfo:{},emblemWrapper:{},emblem:{width:110,height:40},wrapperIata:{color:"#a0b0b9",marginBottom:e.spacing(.8),fontSize:12},duration:{marginBottom:e.spacing(.8),fontSize:12,color:"#a0b0b9"},stopsContainer:{display:"flex",color:"#4a4a4a;",fontSize:14,fontWeight:600},wrapperStops:{width:130},stops:{paddingRight:e.spacing(1)},counterStops:{display:"flex",marginBottom:e.spacing(.8),color:"#a0b0b9",fontSize:12},infoStyle:{color:"#4a4a4a;",fontSize:14,fontWeight:600}}}));function D(e){var t=e.infoFromTickets,a=M(),n=t.duration,o=Q()(t.date).format("HH:mm"),c=Q()(t.date).add(n,"minutes").format("HH:mm"),i=Math.trunc(n/60),s=n%60;return r.a.createElement("div",{className:a.wrapperInfoContainer},r.a.createElement("div",null,r.a.createElement("div",{className:a.wrapperIata},"".concat(t.origin," - ").concat(t.destination)),r.a.createElement("div",{className:a.infoStyle},o," - ",c)),r.a.createElement("div",null,r.a.createElement("div",{className:a.duration},"\u0412 \u041f\u0423\u0422\u0418"),r.a.createElement("div",{className:a.infoStyle},s<10?"".concat(i,"\u0447 0").concat(s,"\u043c"):"".concat(i,"\u0447 ").concat(s,"\u043c"))),r.a.createElement("div",{className:a.wrapperStops},r.a.createElement("div",{className:a.counterStops},function(e){var t=e.length;return 0===t?"\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a":1===t?"1 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410":"".concat(e.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418")}(t.stops)),r.a.createElement("div",{className:a.stopsContainer},t.stops.map((function(e){return r.a.createElement("div",{className:a.stops,key:e},e)})))))}function K(e){var t,a=e.tickets,n=M(),o=a.price.toLocaleString(),c=Object(g.a)(a.segments,2),i=c[0],s=c[1];return r.a.createElement("div",{className:n.ticketContainer},r.a.createElement("div",{className:n.wrapperHeaderContainer},r.a.createElement("div",{className:n.price},"".concat(o," P")),r.a.createElement("div",{className:n.emblemWrapper},r.a.createElement("img",{className:n.emblem,alt:"emblem",src:(t=a.carrier,"//pics.avs.io/99/36/".concat(t,".png"))}))),r.a.createElement("div",{className:n.wrapperTimeContainer},r.a.createElement(D,{infoFromTickets:i}),r.a.createElement(D,{infoFromTickets:s})))}var P=Object(T.a)((function(e){return{button:{backgroundColor:"#2196f3",width:542,height:50,borderRadius:8,marginTop:e.spacing(2.5)}}}));function G(){var e=P();return r.a.createElement(h.a,{className:e.button,color:"primary",variant:"contained",disableElevation:!0},"MORE")}var J=a(57),V=function(e,t,a,n){var r=e.items.responseTickets.tickets;if(!r)return null;var o,c,i=Object(J.a)(r).slice(0);return Object.keys(t).length&&(o=t,!Object.values(o).every((function(e){return!1===e})))&&((null===t||void 0===t?void 0:t.one)||(i=r.filter((function(e){var t=e.segments,n=Object(g.a)(t,2),r=n[0],o=n[1];return r.stops.length<=a&&o.stops.length<=a})))),"cheap"===n&&i.sort((c="price",function(e,t){return e[c]>t[c]?1:-1})).slice(0,5),"fast"===n&&i.sort((function(e,t){var a=Object(g.a)(e.segments,2),n=a[0],r=a[1],o=Object(g.a)(t.segments,2),c=o[0],i=o[1];return n.duration+r.duration>c.duration+i.duration?1:-1})).slice(0,5),i.slice(0,5)},$=Object(T.a)((function(e){return{ticketContainer:{width:502,height:184,backgroundColor:"white",filter:"drop-shadow(0px 2px 4px rgba(0,0,0,0.1))",borderRadius:5,marginTop:e.spacing(2.5),padding:e.spacing(2.5)}}}));function q(e){var t=e.stateCheckBox,a=e.allowedStopsCount,o=$(),c=Object(n.useState)(""),s=Object(g.a)(c,2),l=s[0],u=s[1],d=Math.max.apply(Math,Object(f.a)(a)),p=Object(i.c)((function(e){return V(e,t,d,l)}));return 0===p.length?r.a.createElement("div",{className:o.ticketContainer}," \u0411\u0438\u043b\u0435\u0442\u043e\u0432 \u043d\u0435 \u043d\u0430\u0448\u043b\u043e\u0441\u044c "):r.a.createElement("div",null,r.a.createElement(z,{isButtonActive:l,handleClickButtonCheap:function(){u("cheap")},handleClickButtonFast:function(){u("fast")}}),p.map((function(e){return r.a.createElement(K,{key:e.price,tickets:e})})),r.a.createElement(G,null))}var X=Object(T.a)((function(e){return{mainPage:{width:980,boxShadow:"0 0 10px rgba(0,0,0,0.1)",backgroundColor:"white",margin:"auto",paddingTop:e.spacing(5),minHeight:1e3,paddingBottom:e.spacing(5)},wrapperContainer:{display:"flex",justifyContent:"center"},spinner:{backgroundColor:"#2196f3"}}})),Y=[{id:"one",label:"\u0412\u0441\u0435",value:5},{id:"two",label:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",value:0},{id:"three",label:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",value:1},{id:"four",label:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",value:2},{id:"five",label:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",value:3}];function Z(){var e=X(),t=Object(i.c)((function(e){return e.items})).ticketsLoaded,a=Object(n.useState)({}),o=Object(g.a)(a,2),c=o[0],s=o[1],l=Object(n.useState)([]),u=Object(g.a)(l,2),p=u[0],m=u[1];return r.a.createElement("div",{className:e.mainPage},!t&&r.a.createElement(N,null)||r.a.createElement("div",{className:e.wrapperContainer},r.a.createElement(H,{stateCheckBox:c,handleChange:function(e,t,a){s(Object(d.a)(Object(d.a)({},c),{},Object(b.a)({},e,a)));var n=p.includes(t)?p.filter((function(e){return e!==t})):[].concat(Object(f.a)(p),[t]);m(n)},checkboxGroup:Y}),r.a.createElement(q,{allowedStopsCount:p,stateCheckBox:c})))}var ee=function(){var e=Object(s.createStore)(m,Object(l.composeWithDevTools)(Object(s.applyMiddleware)(u.a)));return r.a.createElement(i.a,{store:e},r.a.createElement(Z,null))};a(94),a(95);c.a.render(r.a.createElement(ee,null),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.9b3e29c0.chunk.js.map